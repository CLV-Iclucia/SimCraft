//
// Created by creeper on 6/2/24.
//

#ifndef SIMCRAFT_FEM_INCLUDE_FEM_IPC_EXTERNAL_DISTANCES_H_
#define SIMCRAFT_FEM_INCLUDE_FEM_IPC_EXTERNAL_DISTANCES_H_

// These codes are taken from ipc-toolkit symbolically generated derivatives
namespace fem::ipc::autogen {
inline void point_line_distance_gradient_3D(
    double v01,
    double v02,
    double v03,
    double v11,
    double v12,
    double v13,
    double v21,
    double v22,
    double v23,
    double g[9]) {
  double t17, t18, t19, t20, t21, t22, t23, t24, t25, t42, t44, t45, t46,
      t43, t50, t51, t52;
  t17 = -v11 + v01;
  t18 = -v12 + v02;
  t19 = -v13 + v03;
  t20 = -v21 + v01;
  t21 = -v22 + v02;
  t22 = -v23 + v03;
  t23 = -v21 + v11;
  t24 = -v22 + v12;
  t25 = -v23 + v13;
  t42 = 1.0 / ((t23 * t23 + t24 * t24) + t25 * t25);
  t44 = t17 * t21 + -(t18 * t20);
  t45 = t17 * t22 + -(t19 * t20);
  t46 = t18 * t22 + -(t19 * t21);
  t43 = t42 * t42;
  t50 = (t44 * t44 + t45 * t45) + t46 * t46;
  t51 = (v11 * 2.0 + -(v21 * 2.0)) * t43 * t50;
  t52 = (v12 * 2.0 + -(v22 * 2.0)) * t43 * t50;
  t43 = (v13 * 2.0 + -(v23 * 2.0)) * t43 * t50;
  g[0] = t42 * (t24 * t44 * 2.0 + t25 * t45 * 2.0);
  g[1] = -t42 * (t23 * t44 * 2.0 - t25 * t46 * 2.0);
  g[2] = -t42 * (t23 * t45 * 2.0 + t24 * t46 * 2.0);
  g[3] = -t51 - t42 * (t21 * t44 * 2.0 + t22 * t45 * 2.0);
  g[4] = -t52 + t42 * (t20 * t44 * 2.0 - t22 * t46 * 2.0);
  g[5] = -t43 + t42 * (t20 * t45 * 2.0 + t21 * t46 * 2.0);
  g[6] = t51 + t42 * (t18 * t44 * 2.0 + t19 * t45 * 2.0);
  g[7] = t52 - t42 * (t17 * t44 * 2.0 - t19 * t46 * 2.0);
  g[8] = t43 - t42 * (t17 * t45 * 2.0 + t18 * t46 * 2.0);
}
inline void point_line_distance_hessian_3D(
    double v01,
    double v02,
    double v03,
    double v11,
    double v12,
    double v13,
    double v21,
    double v22,
    double v23,
    double H[81]) {
  double t17, t18, t19, t20, t21, t22, t23, t24, t25, t26, t27, t28, t35,
      t36, t37, t50, t51, t52, t53, t54, t55, t56, t62, t70, t71, t75,
      t79, t80, t84, t88, t38, t39, t40, t41, t42, t43, t44, t46, t48,
      t57, t58, t60, t63, t65, t67, t102, t103, t104, t162, t163, t164,
      t213, t214, t215, t216, t217, t218, t225, t226, t227, t229, t230,
      t311, t231, t232, t233, t234, t235, t236, t237, t238, t239, t240,
      t245, t279, t281, t282, t283, t287, t289, t247, t248, t249, t250,
      t251, t252, t253, t293, t295, t299, t300, t303, t304, t294, t297,
      t301, t302;

  t17 = -v11 + v01;
  t18 = -v12 + v02;
  t19 = -v13 + v03;
  t20 = -v21 + v01;
  t21 = -v22 + v02;
  t22 = -v23 + v03;
  t23 = -v21 + v11;
  t24 = -v22 + v12;
  t25 = -v23 + v13;
  t26 = v11 * 2.0 + -(v21 * 2.0);
  t27 = v12 * 2.0 + -(v22 * 2.0);
  t28 = v13 * 2.0 + -(v23 * 2.0);
  t35 = t23 * t23;
  t36 = t24 * t24;
  t37 = t25 * t25;
  t50 = t17 * t21;
  t51 = t18 * t20;
  t52 = t17 * t22;
  t53 = t19 * t20;
  t54 = t18 * t22;
  t55 = t19 * t21;
  t56 = t17 * t20 * 2.0;
  t62 = t18 * t21 * 2.0;
  t70 = t19 * t22 * 2.0;
  t71 = t17 * t23 * 2.0;
  t75 = t18 * t24 * 2.0;
  t79 = t19 * t25 * 2.0;
  t80 = t20 * t23 * 2.0;
  t84 = t21 * t24 * 2.0;
  t88 = t22 * t25 * 2.0;
  t38 = t17 * t17 * 2.0;
  t39 = t18 * t18 * 2.0;
  t40 = t19 * t19 * 2.0;
  t41 = t20 * t20 * 2.0;
  t42 = t21 * t21 * 2.0;
  t43 = t22 * t22 * 2.0;
  t44 = t35 * 2.0;
  t46 = t36 * 2.0;
  t48 = t37 * 2.0;
  t57 = t50 * 2.0;
  t58 = t51 * 2.0;
  t60 = t52 * 2.0;
  t63 = t53 * 2.0;
  t65 = t54 * 2.0;
  t67 = t55 * 2.0;
  t102 = 1.0 / ((t35 + t36) + t37);
  t36 = t50 + -t51;
  t35 = t52 + -t53;
  t37 = t54 + -t55;
  t103 = t102 * t102;
  t104 = t102 * t102 * t102;
  t162 = -(t23 * t24 * t102 * 2.0);
  t163 = -(t23 * t25 * t102 * 2.0);
  t164 = -(t24 * t25 * t102 * 2.0);
  t213 = t18 * t36 * 2.0 + t19 * t35 * 2.0;
  t214 = t17 * t35 * 2.0 + t18 * t37 * 2.0;
  t215 = t21 * t36 * 2.0 + t22 * t35 * 2.0;
  t216 = t20 * t35 * 2.0 + t21 * t37 * 2.0;
  t217 = t24 * t36 * 2.0 + t25 * t35 * 2.0;
  t218 = t23 * t35 * 2.0 + t24 * t37 * 2.0;
  t35 = (t36 * t36 + t35 * t35) + t37 * t37;
  t225 = t17 * t36 * 2.0 + -(t19 * t37 * 2.0);
  t226 = t20 * t36 * 2.0 + -(t22 * t37 * 2.0);
  t227 = t23 * t36 * 2.0 + -(t25 * t37 * 2.0);
  t36 = t26 * t103;
  t229 = t36 * t213;
  t37 = t27 * t103;
  t230 = t37 * t213;
  t311 = t28 * t103;
  t231 = t311 * t213;
  t232 = t36 * t214;
  t233 = t37 * t214;
  t234 = t311 * t214;
  t235 = t36 * t215;
  t236 = t37 * t215;
  t237 = t311 * t215;
  t238 = t36 * t216;
  t239 = t37 * t216;
  t240 = t311 * t216;
  t214 = t36 * t217;
  t215 = t37 * t217;
  t216 = t311 * t217;
  t217 = t36 * t218;
  t245 = t37 * t218;
  t213 = t311 * t218;
  t279 = t103 * t35 * 2.0;
  t281 = t26 * t26 * t104 * t35 * 2.0;
  t282 = t27 * t27 * t104 * t35 * 2.0;
  t283 = t28 * t28 * t104 * t35 * 2.0;
  t287 = t26 * t27 * t104 * t35 * 2.0;
  t218 = t26 * t28 * t104 * t35 * 2.0;
  t289 = t27 * t28 * t104 * t35 * 2.0;
  t247 = t36 * t225;
  t248 = t37 * t225;
  t249 = t311 * t225;
  t250 = t36 * t226;
  t251 = t37 * t226;
  t252 = t311 * t226;
  t253 = t36 * t227;
  t35 = t37 * t227;
  t36 = t311 * t227;
  t293 = t102 * (t75 + t79) + t214;
  t295 = -(t102 * (t80 + t84)) + t213;
  t299 = t102 * ((t63 + t22 * t23 * 2.0) + -t60) + t217;
  t300 = t102 * ((t67 + t22 * t24 * 2.0) + -t65) + t245;
  t303 = -(t102 * ((t57 + t17 * t24 * 2.0) + -t58)) + t215;
  t304 = -(t102 * ((t60 + t17 * t25 * 2.0) + -t63)) + t216;
  t294 = t102 * (t71 + t75) + -t213;
  t297 = -(t102 * (t80 + t88)) + t35;
  t88 = -(t102 * (t84 + t88)) + -t214;
  t301 = t102 * ((t58 + t21 * t23 * 2.0) + -t57) + t253;
  t302 = t102 * ((t65 + t21 * t25 * 2.0) + -t67) + t36;
  t84 = t102 * ((t57 + t20 * t24 * 2.0) + -t58) + -t215;
  t80 = t102 * ((t60 + t20 * t25 * 2.0) + -t63) + -t216;
  t75 = -(t102 * ((t63 + t19 * t23 * 2.0) + -t60)) + -t217;
  t227 = -(t102 * ((t67 + t19 * t24 * 2.0) + -t65)) + -t245;
  t311 = ((-(t17 * t19 * t102 * 2.0) + t231) + -t232) + t218;
  t245 = ((-(t20 * t22 * t102 * 2.0) + t237) + -t238) + t218;
  t226 = ((-t102 * (t67 - t54 * 4.0) + t233) + t252) + -t289;
  t28 = ((-t102 * (t63 - t52 * 4.0) + t232) + -t237) + -t218;
  t27 = ((-t102 * (t58 - t50 * 4.0) + t247) + -t236) + -t287;
  t225 = ((-(t102 * (t65 + -(t55 * 4.0))) + t239) + t249) + -t289;
  t26 = ((-(t102 * (t60 + -(t53 * 4.0))) + t238) + -t231) + -t218;
  t103 = ((-(t102 * (t57 + -(t51 * 4.0))) + t250) + -t230) + -t287;
  t104 = (((-(t102 * (t56 + t62)) + t234) + t240) + t279) + -t283;
  t218 = (((-(t102 * (t56 + t70)) + t248) + t251) + t279) + -t282;
  t217 = (((-(t102 * (t62 + t70)) + -t229) + -t235) + t279) + -t281;
  t216 = t102 * (t71 + t79) + -t35;
  t215 = -(t102 * ((t58 + t18 * t23 * 2.0) + -t57)) + -t253;
  t214 = -(t102 * ((t65 + t18 * t25 * 2.0) + -t67)) + -t36;
  t213 = ((-(t17 * t18 * t102 * 2.0) + t230) + -t247) + t287;
  t37 = ((-(t20 * t21 * t102 * 2.0) + t236) + -t250) + t287;
  t36 = ((-(t18 * t19 * t102 * 2.0) + -t233) + -t249) + t289;
  t35 = ((-(t21 * t22 * t102 * 2.0) + -t239) + -t252) + t289;
  H[0] = t102 * (t46 + t48);
  H[1] = t162;
  H[2] = t163;
  H[3] = t88;
  H[4] = t84;
  H[5] = t80;
  H[6] = t293;
  H[7] = t303;
  H[8] = t304;
  H[9] = t162;
  H[10] = t102 * (t44 + t48);
  H[11] = t164;
  H[12] = t301;
  H[13] = t297;
  H[14] = t302;
  H[15] = t215;
  H[16] = t216;
  H[17] = t214;
  H[18] = t163;
  H[19] = t164;
  H[20] = t102 * (t44 + t46);
  H[21] = t299;
  H[22] = t300;
  H[23] = t295;
  H[24] = t75;
  H[25] = t227;
  H[26] = t294;
  H[27] = t88;
  H[28] = t301;
  H[29] = t299;
  H[30] = ((t235 * 2.0 + -t279) + t281) + t102 * (t42 + t43);
  H[31] = t37;
  H[32] = t245;
  H[33] = t217;
  H[34] = t27;
  H[35] = t28;
  H[36] = t84;
  H[37] = t297;
  H[38] = t300;
  H[39] = t37;
  H[40] = ((t251 * -2.0 + -t279) + t282) + t102 * (t41 + t43);
  H[41] = t35;
  H[42] = t103;
  H[43] = t218;
  H[44] = t226;
  H[45] = t80;
  H[46] = t302;
  H[47] = t295;
  H[48] = t245;
  H[49] = t35;
  H[50] = ((t240 * -2.0 + -t279) + t283) + t102 * (t41 + t42);
  H[51] = t26;
  H[52] = t225;
  H[53] = t104;
  H[54] = t293;
  H[55] = t215;
  H[56] = t75;
  H[57] = t217;
  H[58] = t103;
  H[59] = t26;
  H[60] = ((t229 * 2.0 + -t279) + t281) + t102 * (t39 + t40);
  H[61] = t213;
  H[62] = t311;
  H[63] = t303;
  H[64] = t216;
  H[65] = t227;
  H[66] = t27;
  H[67] = t218;
  H[68] = t225;
  H[69] = t213;
  H[70] = ((t248 * -2.0 + -t279) + t282) + t102 * (t38 + t40);
  H[71] = t36;
  H[72] = t304;
  H[73] = t214;
  H[74] = t294;
  H[75] = t28;
  H[76] = t226;
  H[77] = t104;
  H[78] = t311;
  H[79] = t36;
  H[80] = ((t234 * -2.0 + -t279) + t283) + t102 * (t38 + t39);
}

inline void point_plane_distance_gradient(
    double v01,
    double v02,
    double v03,
    double v11,
    double v12,
    double v13,
    double v21,
    double v22,
    double v23,
    double v31,
    double v32,
    double v33,
    double g[12]) {
  double t11, t12, t13, t14, t15, t16, t17, t18, t19, t20, t21, t22, t32,
      t33, t34, t43, t45, t44, t46;
  t11 = -v11 + v01;
  t12 = -v12 + v02;
  t13 = -v13 + v03;
  t14 = -v21 + v11;
  t15 = -v22 + v12;
  t16 = -v23 + v13;
  t17 = -v31 + v11;
  t18 = -v32 + v12;
  t19 = -v33 + v13;
  t20 = -v31 + v21;
  t21 = -v32 + v22;
  t22 = -v33 + v23;
  t32 = t14 * t18 + -(t15 * t17);
  t33 = t14 * t19 + -(t16 * t17);
  t34 = t15 * t19 + -(t16 * t18);
  t43 = 1.0 / ((t32 * t32 + t33 * t33) + t34 * t34);
  t45 = (t13 * t32 + t11 * t34) + -(t12 * t33);
  t44 = t43 * t43;
  t46 = t45 * t45;
  g[0] = t34 * t43 * t45 * 2.0;
  g[1] = t33 * t43 * t45 * -2.0;
  g[2] = t32 * t43 * t45 * 2.0;
  t45 *= t43;
  g[3] = -t44 * t46 * (t21 * t32 * 2.0 + t22 * t33 * 2.0) - t45 * ((t34 + t12 * t22) - t13 * t21) * 2.0;
  t43 = t44 * t46;
  g[4] = t43 * (t20 * t32 * 2.0 - t22 * t34 * 2.0) + t45 * ((t33 + t11 * t22) - t13 * t20) * 2.0;
  g[5] = t43 * (t20 * t33 * 2.0 + t21 * t34 * 2.0) - t45 * ((t32 + t11 * t21) - t12 * t20) * 2.0;
  g[6] = t45 * (t12 * t19 - t13 * t18) * 2.0 + t43 * (t18 * t32 * 2.0 + t19 * t33 * 2.0);
  g[7] = t45 * (t11 * t19 - t13 * t17) * -2.0 - t43 * (t17 * t32 * 2.0 - t19 * t34 * 2.0);
  g[8] = t45 * (t11 * t18 - t12 * t17) * 2.0 - t43 * (t17 * t33 * 2.0 + t18 * t34 * 2.0);
  g[9] = t45 * (t12 * t16 - t13 * t15) * -2.0 - t43 * (t15 * t32 * 2.0 + t16 * t33 * 2.0);
  g[10] = t45 * (t11 * t16 - t13 * t14) * 2.0 + t43 * (t14 * t32 * 2.0 - t16 * t34 * 2.0);
  g[11] = t45 * (t11 * t15 - t12 * t14) * -2.0 + t43 * (t14 * t33 * 2.0 + t15 * t34 * 2.0);
}

inline void point_plane_distance_hessian(
    double v01,
    double v02,
    double v03,
    double v11,
    double v12,
    double v13,
    double v21,
    double v22,
    double v23,
    double v31,
    double v32,
    double v33,
    double H[144]) {
  double t11, t12, t13, t18, t20, t22, t23, t24, t25, t26, t27, t28, t65,
      t66, t67, t68, t69, t70, t71, t77, t85, t86, t90, t94, t95, t99,
      t103, t38, t39, t40, t41, t42, t43, t44, t45, t46, t72, t73, t75,
      t78, t80, t82, t125, t126, t127, t128, t129, t130, t131, t133, t135,
      t149, t150, t151, t189, t190, t191, t192, t193, t194, t195, t196,
      t197, t198, t199, t200, t202, t205, t203, t204, t206, t241, t309,
      t310, t312, t313, t314, t315, t316, t317, t318, t319, t321, t322,
      t323, t324, t325, t261, t262, t599, t600, t602, t605, t609, t610,
      t611, t613, t615, t616, t621, t622, t623, t625, t645, t646_tmp,
      t646, t601, t603, t604, t606, t607, t608, t612, t614, t617, t618,
      t619, t620, t624, t626, t627, t628, t629, t630, t631, t632, t633,
      t634, t635, t636, t637, t638;

  t11 = -v11 + v01;
  t12 = -v12 + v02;
  t13 = -v13 + v03;
  t18 = -v21 + v11;
  t20 = -v22 + v12;
  t22 = -v23 + v13;
  t23 = -v31 + v11;
  t24 = -v32 + v12;
  t25 = -v33 + v13;
  t26 = -v31 + v21;
  t27 = -v32 + v22;
  t28 = -v33 + v23;
  t65 = t18 * t24;
  t66 = t20 * t23;
  t67 = t18 * t25;
  t68 = t22 * t23;
  t69 = t20 * t25;
  t70 = t22 * t24;
  t71 = t18 * t23 * 2.0;
  t77 = t20 * t24 * 2.0;
  t85 = t22 * t25 * 2.0;
  t86 = t18 * t26 * 2.0;
  t90 = t20 * t27 * 2.0;
  t94 = t22 * t28 * 2.0;
  t95 = t23 * t26 * 2.0;
  t99 = t24 * t27 * 2.0;
  t103 = t25 * t28 * 2.0;
  t38 = t18 * t18 * 2.0;
  t39 = t20 * t20 * 2.0;
  t40 = t22 * t22 * 2.0;
  t41 = t23 * t23 * 2.0;
  t42 = t24 * t24 * 2.0;
  t43 = t25 * t25 * 2.0;
  t44 = t26 * t26 * 2.0;
  t45 = t27 * t27 * 2.0;
  t46 = t28 * t28 * 2.0;
  t72 = t65 * 2.0;
  t73 = t66 * 2.0;
  t75 = t67 * 2.0;
  t78 = t68 * 2.0;
  t80 = t69 * 2.0;
  t82 = t70 * 2.0;
  t125 = t11 * t20 + -(t12 * t18);
  t126 = t11 * t22 + -(t13 * t18);
  t127 = t12 * t22 + -(t13 * t20);
  t128 = t11 * t24 + -(t12 * t23);
  t129 = t11 * t25 + -(t13 * t23);
  t130 = t12 * t25 + -(t13 * t24);
  t131 = t65 + -t66;
  t133 = t67 + -t68;
  t135 = t69 + -t70;
  t149 = t131 * t131;
  t150 = t133 * t133;
  t151 = t135 * t135;
  t189 = (t11 * t27 + -(t12 * t26)) + t131;
  t190 = (t11 * t28 + -(t13 * t26)) + t133;
  t191 = (t12 * t28 + -(t13 * t27)) + t135;
  t192 = t20 * t131 * 2.0 + t22 * t133 * 2.0;
  t193 = t18 * t133 * 2.0 + t20 * t135 * 2.0;
  t194 = t24 * t131 * 2.0 + t25 * t133 * 2.0;
  t195 = t23 * t133 * 2.0 + t24 * t135 * 2.0;
  t196 = t27 * t131 * 2.0 + t28 * t133 * 2.0;
  t197 = t26 * t133 * 2.0 + t27 * t135 * 2.0;
  t198 = t18 * t131 * 2.0 + -(t22 * t135 * 2.0);
  t199 = t23 * t131 * 2.0 + -(t25 * t135 * 2.0);
  t200 = t26 * t131 * 2.0 + -(t28 * t135 * 2.0);
  t202 = 1.0 / ((t149 + t150) + t151);
  t205 = (t13 * t131 + t11 * t135) + -(t12 * t133);
  t203 = t202 * t202;
  t204 = t202 * t202 * t202;
  t206 = t205 * t205;
  t241 = t131 * t135 * t202 * 2.0;
  t309 = t11 * t202 * t205 * 2.0;
  t310 = t12 * t202 * t205 * 2.0;
  t13 = t13 * t202 * t205 * 2.0;
  t312 = (-v21 + v01) * t202 * t205 * 2.0;
  t313 = (-v22 + v02) * t202 * t205 * 2.0;
  t314 = (-v23 + v03) * t202 * t205 * 2.0;
  t315 = (-v31 + v01) * t202 * t205 * 2.0;
  t316 = t18 * t202 * t205 * 2.0;
  t317 = (-v32 + v02) * t202 * t205 * 2.0;
  t318 = t20 * t202 * t205 * 2.0;
  t319 = (-v33 + v03) * t202 * t205 * 2.0;
  t11 = t22 * t202 * t205 * 2.0;
  t321 = t23 * t202 * t205 * 2.0;
  t322 = t24 * t202 * t205 * 2.0;
  t323 = t25 * t202 * t205 * 2.0;
  t324 = t26 * t202 * t205 * 2.0;
  t325 = t27 * t202 * t205 * 2.0;
  t12 = t28 * t202 * t205 * 2.0;
  t261 = -(t131 * t133 * t202 * 2.0);
  t262 = -(t133 * t135 * t202 * 2.0);
  t599 = t130 * t135 * t202 * 2.0 + t135 * t194 * t203 * t205 * 2.0;
  t600 = -(t125 * t131 * t202 * 2.0) + t131 * t193 * t203 * t205 * 2.0;
  t602 = t129 * t133 * t202 * 2.0 + t133 * t199 * t203 * t205 * 2.0;
  t605 = -(t131 * t189 * t202 * 2.0) + t131 * t197 * t203 * t205 * 2.0;
  t609 =
      (t127 * t133 * t202 * 2.0 + -t11) + t133 * t192 * t203 * t205 * 2.0;
  t610 =
      (t126 * t135 * t202 * 2.0 + t11) + t135 * t198 * t203 * t205 * 2.0;
  t611 = (t130 * t131 * t202 * 2.0 + -t322)
      + t131 * t194 * t203 * t205 * 2.0;
  t613 = (t126 * t131 * t202 * 2.0 + -t316)
      + t131 * t198 * t203 * t205 * 2.0;
  t615 = (-(t125 * t135 * t202 * 2.0) + -t318)
      + t135 * t193 * t203 * t205 * 2.0;
  t616 = (-(t128 * t133 * t202 * 2.0) + -t321)
      + t133 * t195 * t203 * t205 * 2.0;
  t621 =
      (t133 * t191 * t202 * 2.0 + -t12) + t133 * t196 * t203 * t205 * 2.0;
  t622 =
      (t135 * t190 * t202 * 2.0 + t12) + t135 * t200 * t203 * t205 * 2.0;
  t623 = (t131 * t190 * t202 * 2.0 + -t324)
      + t131 * t200 * t203 * t205 * 2.0;
  t625 = (-(t135 * t189 * t202 * 2.0) + -t325)
      + t135 * t197 * t203 * t205 * 2.0;
  t645 = ((((t127 * t129 * t202 * 2.0 + -t13)
      + (t72 + -(t66 * 4.0)) * t203 * t206)
      + t129 * t192 * t203 * t205 * 2.0)
      + t127 * t199 * t203 * t205 * 2.0)
      + t192 * t199 * t204 * t206 * 2.0;
  t646_tmp = t203 * t206;
  t646 =
      ((((t126 * t130 * t202 * 2.0 + t13) + t646_tmp * (t73 - t65 * 4.0))
          + t126 * t194 * t203 * t205 * 2.0)
          + t130 * t198 * t203 * t205 * 2.0)
          + t194 * t198 * t204 * t206 * 2.0;
  t601 = t128 * t131 * t202 * 2.0 + -(t131 * t195 * t203 * t205 * 2.0);
  t603 = -(t127 * t135 * t202 * 2.0) + -(t135 * t192 * t203 * t205 * 2.0);
  t604 = -(t126 * t133 * t202 * 2.0) + -(t133 * t198 * t203 * t205 * 2.0);
  t606 = -(t135 * t191 * t202 * 2.0) + -(t135 * t196 * t203 * t205 * 2.0);
  t607 = -(t133 * t190 * t202 * 2.0) + -(t133 * t200 * t203 * t205 * 2.0);
  t608 = (t125 * t133 * t202 * 2.0 + t316)
      + -(t133 * t193 * t203 * t205 * 2.0);
  t612 = (t128 * t135 * t202 * 2.0 + t322)
      + -(t135 * t195 * t203 * t205 * 2.0);
  t614 = (-(t127 * t131 * t202 * 2.0) + t318)
      + -(t131 * t192 * t203 * t205 * 2.0);
  t617 = (-(t130 * t133 * t202 * 2.0) + t323)
      + -(t133 * t194 * t203 * t205 * 2.0);
  t618 = (-(t129 * t131 * t202 * 2.0) + t321)
      + -(t131 * t199 * t203 * t205 * 2.0);
  t619 = (-(t129 * t135 * t202 * 2.0) + -t323)
      + -(t135 * t199 * t203 * t205 * 2.0);
  t620 = (t133 * t189 * t202 * 2.0 + t324)
      + -(t133 * t197 * t203 * t205 * 2.0);
  t624 = (-(t131 * t191 * t202 * 2.0) + t325)
      + -(t131 * t196 * t203 * t205 * 2.0);
  t626 = (((t125 * t127 * t202 * 2.0 + t18 * t22 * t203 * t206 * 2.0)
      + t125 * t192 * t203 * t205 * 2.0)
      + -(t127 * t193 * t203 * t205 * 2.0))
      + -(t192 * t193 * t204 * t206 * 2.0);
  t627 = (((t128 * t130 * t202 * 2.0 + t23 * t25 * t203 * t206 * 2.0)
      + t128 * t194 * t203 * t205 * 2.0)
      + -(t130 * t195 * t203 * t205 * 2.0))
      + -(t194 * t195 * t204 * t206 * 2.0);
  t628 = (((-(t125 * t126 * t202 * 2.0) + t20 * t22 * t203 * t206 * 2.0)
      + t126 * t193 * t203 * t205 * 2.0)
      + -(t125 * t198 * t203 * t205 * 2.0))
      + t193 * t198 * t204 * t206 * 2.0;
  t629 = (((-(t128 * t129 * t202 * 2.0) + t24 * t25 * t203 * t206 * 2.0)
      + t129 * t195 * t203 * t205 * 2.0)
      + -(t128 * t199 * t203 * t205 * 2.0))
      + t195 * t199 * t204 * t206 * 2.0;
  t630 = (((-(t126 * t127 * t202 * 2.0) + t18 * t20 * t203 * t206 * 2.0)
      + -(t126 * t192 * t203 * t205 * 2.0))
      + -(t127 * t198 * t203 * t205 * 2.0))
      + -(t192 * t198 * t204 * t206 * 2.0);
  t631 = (((-(t129 * t130 * t202 * 2.0) + t23 * t24 * t203 * t206 * 2.0)
      + -(t129 * t194 * t203 * t205 * 2.0))
      + -(t130 * t199 * t203 * t205 * 2.0))
      + -(t194 * t199 * t204 * t206 * 2.0);
  t632 = (((-(t125 * t128 * t202 * 2.0) + (t71 + t77) * t203 * t206)
      + t128 * t193 * t203 * t205 * 2.0)
      + t125 * t195 * t203 * t205 * 2.0)
      + -(t193 * t195 * t204 * t206 * 2.0);
  t633 = (((-(t127 * t130 * t202 * 2.0) + (t77 + t85) * t203 * t206)
      + -(t130 * t192 * t203 * t205 * 2.0))
      + -(t127 * t194 * t203 * t205 * 2.0))
      + -(t192 * t194 * t204 * t206 * 2.0);
  t634 = (((-(t126 * t129 * t202 * 2.0) + (t71 + t85) * t203 * t206)
      + -(t129 * t198 * t203 * t205 * 2.0))
      + -(t126 * t199 * t203 * t205 * 2.0))
      + -(t198 * t199 * t204 * t206 * 2.0);
  t635 = (((t127 * t191 * t202 * 2.0 + -((t90 + t94) * t203 * t206))
      + t127 * t196 * t203 * t205 * 2.0)
      + t191 * t192 * t203 * t205 * 2.0)
      + t192 * t196 * t204 * t206 * 2.0;
  t636 = (((-(t128 * t189 * t202 * 2.0) + (t95 + t99) * t203 * t206)
      + t128 * t197 * t203 * t205 * 2.0)
      + t189 * t195 * t203 * t205 * 2.0)
      + -(t195 * t197 * t204 * t206 * 2.0);
  t637 = (((t125 * t189 * t202 * 2.0 + -((t86 + t90) * t203 * t206))
      + -(t125 * t197 * t203 * t205 * 2.0))
      + -(t189 * t193 * t203 * t205 * 2.0))
      + t193 * t197 * t204 * t206 * 2.0;
  t638 = (((-(t130 * t191 * t202 * 2.0) + (t99 + t103) * t203 * t206)
      + -(t130 * t196 * t203 * t205 * 2.0))
      + -(t191 * t194 * t203 * t205 * 2.0))
      + -(t194 * t196 * t204 * t206 * 2.0);
  t86 = (((t126 * t190 * t202 * 2.0 + -((t86 + t94) * t203 * t206))
      + t126 * t200 * t203 * t205 * 2.0)
      + t190 * t198 * t203 * t205 * 2.0)
      + t198 * t200 * t204 * t206 * 2.0;
  t71 = (((-(t129 * t190 * t202 * 2.0) + (t95 + t103) * t203 * t206)
      + -(t129 * t200 * t203 * t205 * 2.0))
      + -(t190 * t199 * t203 * t205 * 2.0))
      + -(t199 * t200 * t204 * t206 * 2.0);
  t85 = (((t189 * t191 * t202 * 2.0 + t26 * t28 * t203 * t206 * 2.0)
      + t189 * t196 * t203 * t205 * 2.0)
      + -(t191 * t197 * t203 * t205 * 2.0))
      + -(t196 * t197 * t204 * t206 * 2.0);
  t90 = (((-(t189 * t190 * t202 * 2.0) + t27 * t28 * t203 * t206 * 2.0)
      + t190 * t197 * t203 * t205 * 2.0)
      + -(t189 * t200 * t203 * t205 * 2.0))
      + t197 * t200 * t204 * t206 * 2.0;
  t99 = (((-(t190 * t191 * t202 * 2.0) + t26 * t27 * t203 * t206 * 2.0)
      + -(t190 * t196 * t203 * t205 * 2.0))
      + -(t191 * t200 * t203 * t205 * 2.0))
      + -(t196 * t200 * t204 * t206 * 2.0);
  t77 = ((((-(t127 * t128 * t202 * 2.0) + t310)
      + (t75 + -(t68 * 4.0)) * t203 * t206)
      + t127 * t195 * t203 * t205 * 2.0)
      + -(t128 * t192 * t203 * t205 * 2.0))
      + t192 * t195 * t204 * t206 * 2.0;
  t131 = ((((t126 * t128 * t202 * 2.0 + -t309)
      + (t80 + -(t70 * 4.0)) * t203 * t206)
      + t128 * t198 * t203 * t205 * 2.0)
      + -(t126 * t195 * t203 * t205 * 2.0))
      + -(t195 * t198 * t204 * t206 * 2.0);
  t133 = ((((-(t125 * t130 * t202 * 2.0) + -t310)
      + t646_tmp * (t78 - t67 * 4.0))
      + t130 * t193 * t203 * t205 * 2.0)
      + -(t125 * t194 * t203 * t205 * 2.0))
      + t193 * t194 * t204 * t206 * 2.0;
  t325 =
      ((((t125 * t129 * t202 * 2.0 + t309) + t646_tmp * (t82 - t69 * 4.0))
          + t125 * t199 * t203 * t205 * 2.0)
          + -(t129 * t193 * t203 * t205 * 2.0))
          + -(t193 * t199 * t204 * t206 * 2.0);
  t135 = ((((t125 * t191 * t202 * 2.0 + t313)
      + ((t75 + t18 * t28 * 2.0) + -t78) * t203 * t206)
      + t125 * t196 * t203 * t205 * 2.0)
      + -(t191 * t193 * t203 * t205 * 2.0))
      + -(t193 * t196 * t204 * t206 * 2.0);
  t324 = ((((t127 * t189 * t202 * 2.0 + -t313)
      + ((t78 + t22 * t26 * 2.0) + -t75) * t203 * t206)
      + -(t127 * t197 * t203 * t205 * 2.0))
      + t189 * t192 * t203 * t205 * 2.0)
      + -(t192 * t197 * t204 * t206 * 2.0);
  t318 = ((((-(t126 * t189 * t202 * 2.0) + t312)
      + ((t82 + t22 * t27 * 2.0) + -t80) * t203 * t206)
      + t126 * t197 * t203 * t205 * 2.0)
      + -(t189 * t198 * t203 * t205 * 2.0))
      + t197 * t198 * t204 * t206 * 2.0;
  t321 = ((((-(t130 * t189 * t202 * 2.0) + t317)
      + -(((t78 + t25 * t26 * 2.0) + -t75) * t203 * t206))
      + t130 * t197 * t203 * t205 * 2.0)
      + -(t189 * t194 * t203 * t205 * 2.0))
      + t194 * t197 * t204 * t206 * 2.0;
  t323 = ((((t129 * t191 * t202 * 2.0 + t319)
      + -(((t72 + t23 * t27 * 2.0) + -t73) * t203 * t206))
      + t129 * t196 * t203 * t205 * 2.0)
      + t191 * t199 * t203 * t205 * 2.0)
      + t196 * t199 * t204 * t206 * 2.0;
  t322 = ((((-(t125 * t190 * t202 * 2.0) + -t312)
      + ((t80 + t20 * t28 * 2.0) + -t82) * t203 * t206)
      + -(t125 * t200 * t203 * t205 * 2.0))
      + t190 * t193 * t203 * t205 * 2.0)
      + t193 * t200 * t204 * t206 * 2.0;
  t316 = ((((t130 * t190 * t202 * 2.0 + -t319)
      + -(((t73 + t24 * t26 * 2.0) + -t72) * t203 * t206))
      + t130 * t200 * t203 * t205 * 2.0)
      + t190 * t194 * t203 * t205 * 2.0)
      + t194 * t200 * t204 * t206 * 2.0;
  t65 = ((((-(t128 * t191 * t202 * 2.0) + -t317)
      + -(((t75 + t23 * t28 * 2.0) + -t78) * t203 * t206))
      + -(t128 * t196 * t203 * t205 * 2.0))
      + t191 * t195 * t203 * t205 * 2.0)
      + t195 * t196 * t204 * t206 * 2.0;
  t66 = ((((-(t127 * t190 * t202 * 2.0) + t314)
      + ((t73 + t20 * t26 * 2.0) + -t72) * t203 * t206)
      + -(t127 * t200 * t203 * t205 * 2.0))
      + -(t190 * t192 * t203 * t205 * 2.0))
      + -(t192 * t200 * t204 * t206 * 2.0);
  t13 = ((((t128 * t190 * t202 * 2.0 + t315)
      + -(((t80 + t24 * t28 * 2.0) + -t82) * t203 * t206))
      + t128 * t200 * t203 * t205 * 2.0)
      + -(t190 * t195 * t203 * t205 * 2.0))
      + -(t195 * t200 * t204 * t206 * 2.0);
  t12 = ((((-(t126 * t191 * t202 * 2.0) + -t314)
      + ((t72 + t18 * t27 * 2.0) + -t73) * t203 * t206)
      + -(t126 * t196 * t203 * t205 * 2.0))
      + -(t191 * t198 * t203 * t205 * 2.0))
      + -(t196 * t198 * t204 * t206 * 2.0);
  t11 = ((((t129 * t189 * t202 * 2.0 + -t315)
      + -(((t82 + t25 * t27 * 2.0) + -t80) * t203 * t206))
      + -(t129 * t197 * t203 * t205 * 2.0))
      + t189 * t199 * t203 * t205 * 2.0)
      + -(t197 * t199 * t204 * t206 * 2.0);
  H[0] = t151 * t202 * 2.0;
  H[1] = t262;
  H[2] = t241;
  H[3] = t606;
  H[4] = t622;
  H[5] = t625;
  H[6] = t599;
  H[7] = t619;
  H[8] = t612;
  H[9] = t603;
  H[10] = t610;
  H[11] = t615;
  H[12] = t262;
  H[13] = t150 * t202 * 2.0;
  H[14] = t261;
  H[15] = t621;
  H[16] = t607;
  H[17] = t620;
  H[18] = t617;
  H[19] = t602;
  H[20] = t616;
  H[21] = t609;
  H[22] = t604;
  H[23] = t608;
  H[24] = t241;
  H[25] = t261;
  H[26] = t149 * t202 * 2.0;
  H[27] = t624;
  H[28] = t623;
  H[29] = t605;
  H[30] = t611;
  H[31] = t618;
  H[32] = t601;
  H[33] = t614;
  H[34] = t613;
  H[35] = t600;
  H[36] = t606;
  H[37] = t621;
  H[38] = t624;
  H[39] = ((t191 * t191 * t202 * 2.0 + t196 * t196 * t204 * t206 * 2.0)
      - t646_tmp * (t45 + t46))
      + t191 * t196 * t203 * t205 * 4.0;
  H[40] = t99;
  H[41] = t85;
  H[42] = t638;
  H[43] = t323;
  H[44] = t65;
  H[45] = t635;
  H[46] = t12;
  H[47] = t135;
  H[48] = t622;
  H[49] = t607;
  H[50] = t623;
  H[51] = t99;
  H[52] = ((t190 * t190 * t202 * 2.0 + t200 * t200 * t204 * t206 * 2.0)
      - t646_tmp * (t44 + t46))
      + t190 * t200 * t203 * t205 * 4.0;
  H[53] = t90;
  H[54] = t316;
  H[55] = t71;
  H[56] = t13;
  H[57] = t66;
  H[58] = t86;
  H[59] = t322;
  H[60] = t625;
  H[61] = t620;
  H[62] = t605;
  H[63] = t85;
  H[64] = t90;
  H[65] = ((t189 * t189 * t202 * 2.0 + t197 * t197 * t204 * t206 * 2.0)
      - t646_tmp * (t44 + t45))
      - t189 * t197 * t203 * t205 * 4.0;
  H[66] = t321;
  H[67] = t11;
  H[68] = t636;
  H[69] = t324;
  H[70] = t318;
  H[71] = t637;
  H[72] = t599;
  H[73] = t617;
  H[74] = t611;
  H[75] = t638;
  H[76] = t316;
  H[77] = t321;
  H[78] = ((t130 * t130 * t202 * 2.0 + t194 * t194 * t204 * t206 * 2.0)
      - t646_tmp * (t42 + t43))
      + t130 * t194 * t203 * t205 * 4.0;
  H[79] = t631;
  H[80] = t627;
  H[81] = t633;
  H[82] = t646;
  H[83] = t133;
  H[84] = t619;
  H[85] = t602;
  H[86] = t618;
  H[87] = t323;
  H[88] = t71;
  H[89] = t11;
  H[90] = t631;
  H[91] = ((t129 * t129 * t202 * 2.0 + t199 * t199 * t204 * t206 * 2.0)
      - t646_tmp * (t41 + t43))
      + t129 * t199 * t203 * t205 * 4.0;
  H[92] = t629;
  H[93] = t645;
  H[94] = t634;
  H[95] = t325;
  H[96] = t612;
  H[97] = t616;
  H[98] = t601;
  H[99] = t65;
  H[100] = t13;
  H[101] = t636;
  H[102] = t627;
  H[103] = t629;
  H[104] = ((t128 * t128 * t202 * 2.0 + t195 * t195 * t204 * t206 * 2.0)
      - t646_tmp * (t41 + t42))
      - t128 * t195 * t203 * t205 * 4.0;
  H[105] = t77;
  H[106] = t131;
  H[107] = t632;
  H[108] = t603;
  H[109] = t609;
  H[110] = t614;
  H[111] = t635;
  H[112] = t66;
  H[113] = t324;
  H[114] = t633;
  H[115] = t645;
  H[116] = t77;
  H[117] = ((t127 * t127 * t202 * 2.0 + t192 * t192 * t204 * t206 * 2.0)
      - t646_tmp * (t39 + t40))
      + t127 * t192 * t203 * t205 * 4.0;
  H[118] = t630;
  H[119] = t626;
  H[120] = t610;
  H[121] = t604;
  H[122] = t613;
  H[123] = t12;
  H[124] = t86;
  H[125] = t318;
  H[126] = t646;
  H[127] = t634;
  H[128] = t131;
  H[129] = t630;
  H[130] = ((t126 * t126 * t202 * 2.0 + t198 * t198 * t204 * t206 * 2.0)
      - t646_tmp * (t38 + t40))
      + t126 * t198 * t203 * t205 * 4.0;
  H[131] = t628;
  H[132] = t615;
  H[133] = t608;
  H[134] = t600;
  H[135] = t135;
  H[136] = t322;
  H[137] = t637;
  H[138] = t133;
  H[139] = t325;
  H[140] = t632;
  H[141] = t626;
  H[142] = t628;
  H[143] = ((t125 * t125 * t202 * 2.0 + t193 * t193 * t204 * t206 * 2.0)
      - t646_tmp * (t38 + t39))
      - t125 * t193 * t203 * t205 * 4.0;
}

inline void line_line_distance_gradient(
    double v01,
    double v02,
    double v03,
    double v11,
    double v12,
    double v13,
    double v21,
    double v22,
    double v23,
    double v31,
    double v32,
    double v33,
    double g[12])
{
  double t11, t12, t13, t14, t15, t16, t17, t18, t19, t32, t33, t34, t35,
      t36, t37, t44, t45, t46, t75, t77, t76, t78, t79, t80, t81, t83;

  t11 = -v11 + v01;
  t12 = -v12 + v02;
  t13 = -v13 + v03;
  t14 = -v21 + v01;
  t15 = -v22 + v02;
  t16 = -v23 + v03;
  t17 = -v31 + v21;
  t18 = -v32 + v22;
  t19 = -v33 + v23;
  t32 = t14 * t18;
  t33 = t15 * t17;
  t34 = t14 * t19;
  t35 = t16 * t17;
  t36 = t15 * t19;
  t37 = t16 * t18;
  t44 = t11 * t18 + -(t12 * t17);
  t45 = t11 * t19 + -(t13 * t17);
  t46 = t12 * t19 + -(t13 * t18);
  t75 = 1.0 / ((t44 * t44 + t45 * t45) + t46 * t46);
  t77 = (t16 * t44 + t14 * t46) + -(t15 * t45);
  t76 = t75 * t75;
  t78 = t77 * t77;
  t79 = (t12 * t44 * 2.0 + t13 * t45 * 2.0) * t76 * t78;
  t80 = (t11 * t45 * 2.0 + t12 * t46 * 2.0) * t76 * t78;
  t81 = (t18 * t44 * 2.0 + t19 * t45 * 2.0) * t76 * t78;
  t18 = (t17 * t45 * 2.0 + t18 * t46 * 2.0) * t76 * t78;
  t83 = (t11 * t44 * 2.0 + -(t13 * t46 * 2.0)) * t76 * t78;
  t19 = (t17 * t44 * 2.0 + -(t19 * t46 * 2.0)) * t76 * t78;
  t76 = t75 * t77;
  g[0] = -t81 + t76 * ((-t36 + t37) + t46) * 2.0;
  g[1] = t19 - t76 * ((-t34 + t35) + t45) * 2.0;
  g[2] = t18 + t76 * ((-t32 + t33) + t44) * 2.0;
  g[3] = t81 + t76 * (t36 - t37) * 2.0;
  g[4] = -t19 - t76 * (t34 - t35) * 2.0;
  g[5] = -t18 + t76 * (t32 - t33) * 2.0;
  t17 = t12 * t16 + -(t13 * t15);
  g[6] = t79 - t76 * (t17 + t46) * 2.0;
  t18 = t11 * t16 + -(t13 * t14);
  g[7] = -t83 + t76 * (t18 + t45) * 2.0;
  t19 = t11 * t15 + -(t12 * t14);
  g[8] = -t80 - t76 * (t19 + t44) * 2.0;
  g[9] = -t79 + t76 * t17 * 2.0;
  g[10] = t83 - t76 * t18 * 2.0;
  g[11] = t80 + t76 * t19 * 2.0;
}

// This function was generated by the Symbolic Math Toolbox version 8.3.
// 14-Jun-2019 13:58:38
inline void line_line_distance_hessian(
    double v01,
    double v02,
    double v03,
    double v11,
    double v12,
    double v13,
    double v21,
    double v22,
    double v23,
    double v31,
    double v32,
    double v33,
    double H[144])
{
  double t11, t12, t13, t14, t15, t16, t26, t27, t28, t47, t48, t49, t50,
      t51, t52, t53, t54, t55, t56, t57, t58, t59, t65, t73, t35, t36,
      t37, t38, t39, t40, t98, t99, t100, t101, t103, t105, t107, t108,
      t109, t137, t138, t139, t140, t141, t142, t143, t144, t145, t146,
      t147, t148, t156, t159, t157, t262, t263, t264, t265, t266, t267,
      t268, t269, t270, t271, t272, t273, t274, t275, t276, t277, t278,
      t279, t298, t299, t300, t301, t302, t303, t310, t311, t312, t313,
      t314, t315, t322, t323, t325, t326, t327, t328, t329, t330, t335,
      t337, t339, t340, t341, t342, t343, t345, t348, t353, t356, t358,
      t359, t360, t362, t367, t368, t369, t371, t374, t377, t382, t386,
      t387, t398, t399, t403, t408, t423, t424, t427, t428, t431, t432,
      t433, t434, t437, t438, t441, t442, t446, t451, t455, t456, t467,
      t468, t472, t477, t491, t492, t495, t497, t499, t500, t503, t504,
      t506, t508, t550, t568, t519_tmp, b_t519_tmp, t519, t520_tmp,
      b_t520_tmp, t520, t521_tmp, b_t521_tmp, t521, t522_tmp, b_t522_tmp,
      t522, t523_tmp, b_t523_tmp, t523, t524_tmp, b_t524_tmp, t524, t525,
      t526, t527, t528, t529, t530, t531, t532, t533, t534, t535, t536,
      t537, t538, t539, t540, t542, t543, t544;

  t11 = -v11 + v01;
  t12 = -v12 + v02;
  t13 = -v13 + v03;
  t14 = -v21 + v01;
  t15 = -v22 + v02;
  t16 = -v23 + v03;
  t26 = -v31 + v21;
  t27 = -v32 + v22;
  t28 = -v33 + v23;
  t47 = t11 * t27;
  t48 = t12 * t26;
  t49 = t11 * t28;
  t50 = t13 * t26;
  t51 = t12 * t28;
  t52 = t13 * t27;
  t53 = t14 * t27;
  t54 = t15 * t26;
  t55 = t14 * t28;
  t56 = t16 * t26;
  t57 = t15 * t28;
  t58 = t16 * t27;
  t59 = t11 * t26 * 2.0;
  t65 = t12 * t27 * 2.0;
  t73 = t13 * t28 * 2.0;
  t35 = t11 * t11 * 2.0;
  t36 = t12 * t12 * 2.0;
  t37 = t13 * t13 * 2.0;
  t38 = t26 * t26 * 2.0;
  t39 = t27 * t27 * 2.0;
  t40 = t28 * t28 * 2.0;
  t98 = t11 * t15 + -(t12 * t14);
  t99 = t11 * t16 + -(t13 * t14);
  t100 = t12 * t16 + -(t13 * t15);
  t101 = t47 + -t48;
  t103 = t49 + -t50;
  t105 = t51 + -t52;
  t107 = t53 + -t54;
  t108 = t55 + -t56;
  t109 = t57 + -t58;
  t137 = t98 + t101;
  t138 = t99 + t103;
  t139 = t100 + t105;
  t140 = (t54 + -t53) + t101;
  t141 = (t56 + -t55) + t103;
  t142 = (t58 + -t57) + t105;
  t143 = t12 * t101 * 2.0 + t13 * t103 * 2.0;
  t144 = t11 * t103 * 2.0 + t12 * t105 * 2.0;
  t145 = t27 * t101 * 2.0 + t28 * t103 * 2.0;
  t146 = t26 * t103 * 2.0 + t27 * t105 * 2.0;
  t147 = t11 * t101 * 2.0 + -(t13 * t105 * 2.0);
  t148 = t26 * t101 * 2.0 + -(t28 * t105 * 2.0);
  t156 = 1.0 / ((t101 * t101 + t103 * t103) + t105 * t105);
  t159 = (t16 * t101 + t14 * t105) + -(t15 * t103);
  t157 = t156 * t156;
  t57 = t156 * t156 * t156;
  t58 = t159 * t159;
  t262 = t11 * t156 * t159 * 2.0;
  t263 = t12 * t156 * t159 * 2.0;
  t264 = t13 * t156 * t159 * 2.0;
  t265 = t14 * t156 * t159 * 2.0;
  t266 = t15 * t156 * t159 * 2.0;
  t267 = t16 * t156 * t159 * 2.0;
  t268 = (-v31 + v01) * t156 * t159 * 2.0;
  t269 = (-v21 + v11) * t156 * t159 * 2.0;
  t270 = (-v32 + v02) * t156 * t159 * 2.0;
  t271 = (-v22 + v12) * t156 * t159 * 2.0;
  t272 = (-v33 + v03) * t156 * t159 * 2.0;
  t273 = (-v23 + v13) * t156 * t159 * 2.0;
  t274 = (-v31 + v11) * t156 * t159 * 2.0;
  t275 = (-v32 + v12) * t156 * t159 * 2.0;
  t276 = (-v33 + v13) * t156 * t159 * 2.0;
  t277 = t26 * t156 * t159 * 2.0;
  t278 = t27 * t156 * t159 * 2.0;
  t279 = t28 * t156 * t159 * 2.0;
  t298 = t11 * t12 * t157 * t58 * 2.0;
  t299 = t11 * t13 * t157 * t58 * 2.0;
  t300 = t12 * t13 * t157 * t58 * 2.0;
  t301 = t26 * t27 * t157 * t58 * 2.0;
  t302 = t26 * t28 * t157 * t58 * 2.0;
  t303 = t27 * t28 * t157 * t58 * 2.0;
  t310 = (t35 + t36) * t157 * t58;
  t311 = (t35 + t37) * t157 * t58;
  t312 = (t36 + t37) * t157 * t58;
  t313 = (t38 + t39) * t157 * t58;
  t314 = (t38 + t40) * t157 * t58;
  t315 = (t39 + t40) * t157 * t58;
  t322 = (t59 + t65) * t157 * t58;
  t323 = (t59 + t73) * t157 * t58;
  t59 = (t65 + t73) * t157 * t58;
  t325 = (t47 * 2.0 + -(t48 * 4.0)) * t157 * t58;
  t53 = -t157 * t58;
  t56 = t48 * 2.0 - t47 * 4.0;
  t326 = t53 * t56;
  t327 = (t49 * 2.0 + -(t50 * 4.0)) * t157 * t58;
  t55 = t50 * 2.0 - t49 * 4.0;
  t328 = t53 * t55;
  t329 = (t51 * 2.0 + -(t52 * 4.0)) * t157 * t58;
  t54 = t52 * 2.0 - t51 * 4.0;
  t330 = t53 * t54;
  t53 = t157 * t58;
  t335 = t53 * t56;
  t337 = t53 * t55;
  t339 = t53 * t54;
  t340 = t143 * t143 * t57 * t58 * 2.0;
  t341 = t144 * t144 * t57 * t58 * 2.0;
  t342 = t145 * t145 * t57 * t58 * 2.0;
  t343 = t146 * t146 * t57 * t58 * 2.0;
  t345 = t147 * t147 * t57 * t58 * 2.0;
  t348 = t148 * t148 * t57 * t58 * 2.0;
  t36 = t98 * t143 * t157 * t159 * 2.0;
  t353 = t99 * t143 * t157 * t159 * 2.0;
  t356 = t99 * t144 * t157 * t159 * 2.0;
  t65 = t100 * t144 * t157 * t159 * 2.0;
  t358 = t107 * t143 * t157 * t159 * 2.0;
  t359 = t98 * t145 * t157 * t159 * 2.0;
  t360 = t108 * t143 * t157 * t159 * 2.0;
  t54 = t107 * t144 * t157 * t159 * 2.0;
  t362 = t99 * t145 * t157 * t159 * 2.0;
  t53 = t98 * t146 * t157 * t159 * 2.0;
  t56 = t109 * t143 * t157 * t159 * 2.0;
  t27 = t108 * t144 * t157 * t159 * 2.0;
  t55 = t100 * t145 * t157 * t159 * 2.0;
  t367 = t99 * t146 * t157 * t159 * 2.0;
  t368 = t109 * t144 * t157 * t159 * 2.0;
  t369 = t100 * t146 * t157 * t159 * 2.0;
  t38 = t107 * t145 * t157 * t159 * 2.0;
  t371 = t108 * t145 * t157 * t159 * 2.0;
  t374 = t108 * t146 * t157 * t159 * 2.0;
  t28 = t109 * t146 * t157 * t159 * 2.0;
  t377 = t98 * t147 * t157 * t159 * 2.0;
  t382 = t100 * t147 * t157 * t159 * 2.0;
  t386 = t107 * t147 * t157 * t159 * 2.0;
  t387 = t98 * t148 * t157 * t159 * 2.0;
  t103 = t108 * t147 * t157 * t159 * 2.0;
  t101 = t99 * t148 * t157 * t159 * 2.0;
  t398 = t109 * t147 * t157 * t159 * 2.0;
  t399 = t100 * t148 * t157 * t159 * 2.0;
  t403 = t107 * t148 * t157 * t159 * 2.0;
  t408 = t109 * t148 * t157 * t159 * 2.0;
  t73 = t137 * t143 * t157 * t159 * 2.0;
  t423 = t138 * t143 * t157 * t159 * 2.0;
  t424 = t138 * t144 * t157 * t159 * 2.0;
  t37 = t139 * t144 * t157 * t159 * 2.0;
  t427 = t140 * t143 * t157 * t159 * 2.0;
  t428 = t137 * t145 * t157 * t159 * 2.0;
  t16 = t140 * t144 * t157 * t159 * 2.0;
  t11 = t137 * t146 * t157 * t159 * 2.0;
  t431 = t141 * t143 * t157 * t159 * 2.0;
  t432 = t138 * t145 * t157 * t159 * 2.0;
  t433 = t141 * t144 * t157 * t159 * 2.0;
  t434 = t138 * t146 * t157 * t159 * 2.0;
  t105 = t142 * t143 * t157 * t159 * 2.0;
  t14 = t139 * t145 * t157 * t159 * 2.0;
  t437 = t142 * t144 * t157 * t159 * 2.0;
  t438 = t139 * t146 * t157 * t159 * 2.0;
  t35 = t140 * t145 * t157 * t159 * 2.0;
  t441 = t141 * t145 * t157 * t159 * 2.0;
  t442 = t141 * t146 * t157 * t159 * 2.0;
  t39 = t142 * t146 * t157 * t159 * 2.0;
  t446 = t137 * t147 * t157 * t159 * 2.0;
  t451 = t139 * t147 * t157 * t159 * 2.0;
  t455 = t140 * t147 * t157 * t159 * 2.0;
  t456 = t137 * t148 * t157 * t159 * 2.0;
  t13 = t141 * t147 * t157 * t159 * 2.0;
  t26 = t138 * t148 * t157 * t159 * 2.0;
  t467 = t142 * t147 * t157 * t159 * 2.0;
  t468 = t139 * t148 * t157 * t159 * 2.0;
  t472 = t140 * t148 * t157 * t159 * 2.0;
  t477 = t142 * t148 * t157 * t159 * 2.0;
  t47 = t143 * t144 * t57 * t58 * 2.0;
  t15 = t143 * t145 * t57 * t58 * 2.0;
  t491 = t143 * t146 * t57 * t58 * 2.0;
  t492 = t144 * t145 * t57 * t58 * 2.0;
  t12 = t144 * t146 * t57 * t58 * 2.0;
  t40 = t145 * t146 * t57 * t58 * 2.0;
  t495 = t143 * t147 * t57 * t58 * 2.0;
  t497 = t144 * t147 * t57 * t58 * 2.0;
  t499 = t143 * t148 * t57 * t58 * 2.0;
  t500 = t145 * t147 * t57 * t58 * 2.0;
  t503 = t146 * t147 * t57 * t58 * 2.0;
  t504 = t144 * t148 * t57 * t58 * 2.0;
  t506 = t145 * t148 * t57 * t58 * 2.0;
  t508 = t146 * t148 * t57 * t58 * 2.0;
  t57 = t147 * t148 * t57 * t58 * 2.0;
  t550 =
      ((((t98 * t109 * t156 * 2.0 + -t266) + t337) + t359) + t368) + t492;
  t568 =
      ((((t108 * t137 * t156 * 2.0 + -t268) + t330) + t27) + t456) + t504;
  t519_tmp = t139 * t143 * t157 * t159;
  b_t519_tmp = t100 * t143 * t157 * t159;
  t519 =
      (((-(t100 * t139 * t156 * 2.0) + t312) + -t340) + b_t519_tmp * 2.0)
          + t519_tmp * 2.0;
  t520_tmp = t140 * t146 * t157 * t159;
  b_t520_tmp = t107 * t146 * t157 * t159;
  t520 = (((t107 * t140 * t156 * 2.0 + t313) + -t343) + b_t520_tmp * 2.0)
      + -(t520_tmp * 2.0);
  t521_tmp = t142 * t145 * t157 * t159;
  b_t521_tmp = t109 * t145 * t157 * t159;
  t521 =
      (((t109 * t142 * t156 * 2.0 + t315) + -t342) + -(b_t521_tmp * 2.0))
          + t521_tmp * 2.0;
  t522_tmp = t137 * t144 * t157 * t159;
  b_t522_tmp = t98 * t144 * t157 * t159;
  t522 = (((-(t98 * t137 * t156 * 2.0) + t310) + -t341)
      + -(b_t522_tmp * 2.0))
      + -(t522_tmp * 2.0);
  t523_tmp = t138 * t147 * t157 * t159;
  b_t523_tmp = t99 * t147 * t157 * t159;
  t523 =
      (((-(t99 * t138 * t156 * 2.0) + t311) + -t345) + b_t523_tmp * 2.0)
          + t523_tmp * 2.0;
  t524_tmp = t141 * t148 * t157 * t159;
  b_t524_tmp = t108 * t148 * t157 * t159;
  t524 =
      (((t108 * t141 * t156 * 2.0 + t314) + -t348) + -(b_t524_tmp * 2.0))
          + t524_tmp * 2.0;
  t525 = (((t98 * t100 * t156 * 2.0 + t299) + t65) + -t36) + -t47;
  t526 = (((t107 * t109 * t156 * 2.0 + t302) + t38) + -t28) + -t40;
  t527 = (((-(t98 * t99 * t156 * 2.0) + t300) + t377) + -t356) + t497;
  t528 = (((-(t99 * t100 * t156 * 2.0) + t298) + t353) + t382) + -t495;
  t529 = (((-(t107 * t108 * t156 * 2.0) + t303) + t374) + -t403) + t508;
  t530 = (((-(t108 * t109 * t156 * 2.0) + t301) + -t371) + -t408) + -t506;
  t531 = (((t98 * t107 * t156 * 2.0 + t322) + t54) + -t53) + -t12;
  t532 = (((t100 * t109 * t156 * 2.0 + t59) + t55) + -t56) + -t15;
  t533 = (((t99 * t108 * t156 * 2.0 + t323) + t101) + -t103) + -t57;
  t534 = (((t98 * t140 * t156 * 2.0 + -t322) + t53) + t16) + t12;
  t535 = (((-(t107 * t137 * t156 * 2.0) + -t322) + -t54) + t11) + t12;
  t536 = (((t100 * t142 * t156 * 2.0 + -t59) + -t55) + -t105) + t15;
  t537 = (((-(t109 * t139 * t156 * 2.0) + -t59) + t56) + -t14) + t15;
  t538 = (((t99 * t141 * t156 * 2.0 + -t323) + -t101) + -t13) + t57;
  t539 = (((-(t108 * t138 * t156 * 2.0) + -t323) + t103) + -t26) + t57;
  t540 = (((t137 * t139 * t156 * 2.0 + t299) + t37) + -t73) + -t47;
  t148 = (((t140 * t142 * t156 * 2.0 + t302) + t39) + -t35) + -t40;
  t542 = (((-(t137 * t138 * t156 * 2.0) + t300) + t446) + -t424) + t497;
  t543 = (((-(t138 * t139 * t156 * 2.0) + t298) + t423) + t451) + -t495;
  t544 = (((-(t140 * t141 * t156 * 2.0) + t303) + t472) + -t442) + t508;
  t53 = (((-(t141 * t142 * t156 * 2.0) + t301) + t441) + t477) + -t506;
  t157 = (((-(t139 * t142 * t156 * 2.0) + t59) + t105) + t14) + -t15;
  t159 = (((-(t137 * t140 * t156 * 2.0) + t322) + -t16) + -t11) + -t12;
  t147 = (((-(t138 * t141 * t156 * 2.0) + t323) + t13) + t26) + -t57;
  t146 = ((((t100 * t107 * t156 * 2.0 + t266) + t327) + -t358) + -t369)
      + t491;
  t145 = ((((-(t99 * t107 * t156 * 2.0) + -t265) + t329) + t367) + t386)
      + -t503;
  t144 = ((((-(t100 * t108 * t156 * 2.0) + -t267) + t325) + t360) + -t399)
      + t499;
  t143 = ((((-(t99 * t109 * t156 * 2.0) + t267) + t335) + -t362) + t398)
      + t500;
  t52 = ((((-(t98 * t108 * t156 * 2.0) + t265) + t339) + -t27) + -t387)
      + -t504;
  t51 =
      ((((t109 * t140 * t156 * 2.0 + -t278) + -t302) + t28) + t35) + t40;
  t50 = ((((-(t98 * t139 * t156 * 2.0) + t263) + -t299) + t36) + -t37)
      + t47;
  t49 =
      ((((t107 * t142 * t156 * 2.0 + t278) + -t302) + -t38) + -t39) + t40;
  t48 = ((((-(t100 * t137 * t156 * 2.0) + -t263) + -t299) + -t65) + t73)
      + t47;
  t47 = ((((t99 * t137 * t156 * 2.0 + t262) + -t300) + t356) + -t446)
      + -t497;
  t73 = ((((t100 * t138 * t156 * 2.0 + t264) + -t298) + -t382) + -t423)
      + t495;
  t65 = ((((-(t109 * t141 * t156 * 2.0) + t279) + -t301) + t408) + -t441)
      + t506;
  t59 = ((((t98 * t138 * t156 * 2.0 + -t262) + -t300) + -t377) + t424)
      + -t497;
  t40 = ((((t99 * t139 * t156 * 2.0 + -t264) + -t298) + -t353) + -t451)
      + t495;
  t39 = ((((-(t107 * t141 * t156 * 2.0) + -t277) + -t303) + t403) + t442)
      + -t508;
  t38 = ((((-(t108 * t142 * t156 * 2.0) + -t279) + -t301) + t371) + -t477)
      + t506;
  t37 = ((((-(t108 * t140 * t156 * 2.0) + t277) + -t303) + -t374) + -t472)
      + -t508;
  t36 = ((((t98 * t142 * t156 * 2.0 + t271) + t328) + -t359) + t437)
      + -t492;
  t35 = ((((-(t109 * t137 * t156 * 2.0) + t270) + t328) + -t368) + -t428)
      + -t492;
  t28 = ((((t100 * t140 * t156 * 2.0 + -t271) + -t327) + t369) + -t427)
      + -t491;
  t27 = ((((-(t98 * t141 * t156 * 2.0) + -t269) + t330) + t387) + -t433)
      + t504;
  t26 = ((((t109 * t138 * t156 * 2.0 + -t272) + t326) + -t398) + t432)
      + -t500;
  t13 = ((((-(t107 * t139 * t156 * 2.0) + -t270) + -t327) + t358) + t438)
      + -t491;
  t12 = ((((-(t99 * t142 * t156 * 2.0) + -t273) + t326) + t362) + t467)
      + -t500;
  t11 = ((((-(t99 * t140 * t156 * 2.0) + t269) + -t329) + -t367) + t455)
      + t503;
  t16 = ((((t107 * t138 * t156 * 2.0 + t268) + -t329) + -t386) + -t434)
      + t503;
  t15 = ((((-(t100 * t141 * t156 * 2.0) + t273) + -t325) + t399) + t431)
      + -t499;
  t14 = ((((t108 * t139 * t156 * 2.0 + t272) + -t325) + -t360) + t468)
      + -t499;
  t105 = ((((-(t139 * t140 * t156 * 2.0) + t275) + t327) + t427) + -t438)
      + t491;
  t103 = ((((t138 * t140 * t156 * 2.0 + -t274) + t329) + t434) + -t455)
      + -t503;
  t101 = ((((-(t137 * t142 * t156 * 2.0) + -t275) + t337) + t428) + -t437)
      + t492;
  t58 = ((((t139 * t141 * t156 * 2.0 + -t276) + t325) + -t431) + -t468)
      + t499;
  t57 = ((((t137 * t141 * t156 * 2.0 + t274) + t339) + t433) + -t456)
      + -t504;
  t56 = ((((t138 * t142 * t156 * 2.0 + t276) + t335) + -t432) + -t467)
      + t500;
  t55 = -t315 + t342;
  H[0] = (t55 + t142 * t142 * t156 * 2.0) - t521_tmp * 4.0;
  H[1] = t53;
  H[2] = t148;
  H[3] = t521;
  H[4] = t38;
  H[5] = t49;
  H[6] = t157;
  H[7] = t56;
  H[8] = t101;
  H[9] = t536;
  H[10] = t12;
  H[11] = t36;
  H[12] = t53;
  t54 = -t314 + t348;
  H[13] = (t54 + t141 * t141 * t156 * 2.0) - t524_tmp * 4.0;
  H[14] = t544;
  H[15] = t65;
  H[16] = t524;
  H[17] = t39;
  H[18] = t58;
  H[19] = t147;
  H[20] = t57;
  H[21] = t15;
  H[22] = t538;
  H[23] = t27;
  H[24] = t148;
  H[25] = t544;
  t53 = -t313 + t343;
  H[26] = (t53 + t140 * t140 * t156 * 2.0) + t520_tmp * 4.0;
  H[27] = t51;
  H[28] = t37;
  H[29] = t520;
  H[30] = t105;
  H[31] = t103;
  H[32] = t159;
  H[33] = t28;
  H[34] = t11;
  H[35] = t534;
  H[36] = t521;
  H[37] = t65;
  H[38] = t51;
  H[39] = (t55 + t109 * t109 * t156 * 2.0) + b_t521_tmp * 4.0;
  H[40] = t530;
  H[41] = t526;
  H[42] = t537;
  H[43] = t26;
  H[44] = t35;
  H[45] = t532;
  H[46] = t143;
  H[47] = t550;
  H[48] = t38;
  H[49] = t524;
  H[50] = t37;
  H[51] = t530;
  H[52] = (t54 + t108 * t108 * t156 * 2.0) + b_t524_tmp * 4.0;
  H[53] = t529;
  H[54] = t14;
  H[55] = t539;
  H[56] = t568;
  H[57] = t144;
  H[58] = t533;
  H[59] = t52;
  H[60] = t49;
  H[61] = t39;
  H[62] = t520;
  H[63] = t526;
  H[64] = t529;
  H[65] = (t53 + t107 * t107 * t156 * 2.0) - b_t520_tmp * 4.0;
  H[66] = t13;
  H[67] = t16;
  H[68] = t535;
  H[69] = t146;
  H[70] = t145;
  H[71] = t531;
  H[72] = t157;
  H[73] = t58;
  H[74] = t105;
  H[75] = t537;
  H[76] = t14;
  H[77] = t13;
  t55 = -t312 + t340;
  H[78] = (t55 + t139 * t139 * t156 * 2.0) - t519_tmp * 4.0;
  H[79] = t543;
  H[80] = t540;
  H[81] = t519;
  H[82] = t40;
  H[83] = t50;
  H[84] = t56;
  H[85] = t147;
  H[86] = t103;
  H[87] = t26;
  H[88] = t539;
  H[89] = t16;
  H[90] = t543;
  t54 = -t311 + t345;
  H[91] = (t54 + t138 * t138 * t156 * 2.0) - t523_tmp * 4.0;
  H[92] = t542;
  H[93] = t73;
  H[94] = t523;
  H[95] = t59;
  H[96] = t101;
  H[97] = t57;
  H[98] = t159;
  H[99] = t35;
  H[100] = t568;
  H[101] = t535;
  H[102] = t540;
  H[103] = t542;
  t53 = -t310 + t341;
  H[104] = (t53 + t137 * t137 * t156 * 2.0) + t522_tmp * 4.0;
  H[105] = t48;
  H[106] = t47;
  H[107] = t522;
  H[108] = t536;
  H[109] = t15;
  H[110] = t28;
  H[111] = t532;
  H[112] = t144;
  H[113] = t146;
  H[114] = t519;
  H[115] = t73;
  H[116] = t48;
  H[117] = (t55 + t100 * t100 * t156 * 2.0) - b_t519_tmp * 4.0;
  H[118] = t528;
  H[119] = t525;
  H[120] = t12;
  H[121] = t538;
  H[122] = t11;
  H[123] = t143;
  H[124] = t533;
  H[125] = t145;
  H[126] = t40;
  H[127] = t523;
  H[128] = t47;
  H[129] = t528;
  H[130] = (t54 + t99 * t99 * t156 * 2.0) - b_t523_tmp * 4.0;
  H[131] = t527;
  H[132] = t36;
  H[133] = t27;
  H[134] = t534;
  H[135] = t550;
  H[136] = t52;
  H[137] = t531;
  H[138] = t50;
  H[139] = t59;
  H[140] = t522;
  H[141] = t525;
  H[142] = t527;
  H[143] = (t53 + t98 * t98 * t156 * 2.0) + b_t522_tmp * 4.0;
}
} // namespace fem::ipc::autogen

#endif //SIMCRAFT_FEM_INCLUDE_FEM_IPC_EXTERNAL_DISTANCES_H_
